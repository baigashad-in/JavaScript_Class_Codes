<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="Bootstrap_files/CSS/bootstrap.css">
</head>
<body>
    <table class="table">
        <thead class="table-primary">
            <th>Sr.No.</th>
            <th><input type="text" placeholder="Search" onkeyup="filterColumns(this, 'title')"> <br> Title</th>
            <th><input type="text" placeholder="Search" onkeyup="filterColumns(this, 'price')"> <br> Price</th>
            <th><input type="text" placeholder="Search" onkeyup="filterColumns(this, 'category')"> <br> Category</th>
            <th>Image</th>
        </thead>
        <tbody class="table-secondary">

        </tbody>
    </table>
    <script>
        let anotherProductArr = []
        const getAnotherProducts = async () => {
            const url = "https://fakestoreapi.com/products"
            const responseVariable = await fetch(url)
            anotherProductArr = await responseVariable.json()
            console.log(anotherProductArr);
            let rows = ""
            anotherProductArr.forEach((element, index, array) => {
                rows = rows + `<tr> <td>${index+1}</td> <td>${element.title}</td> <td>${element.price} </td> <td>${element.category}</td> <td><img height = "80px" width = "80px"  src = "${element.image}" > </td></tr>`
            });
            document.querySelector("tbody").innerHTML = rows
            return anotherProductArr
        }
        getAnotherProducts()

        const filterColumns = async (argFromInput, columnName) => {

            // var arrForFiltering = await getAnotherProducts()

            var filterVal = argFromInput.value.toLowerCase()
            var filterOutput = anotherProductArr.filter((element, index, array) => {
                if (element[columnName] != undefined) 
                    {
                        return element[columnName].toString().toLowerCase().includes(filterVal) // returns true or false
                    }
            })

            let res =""
            filterOutput.forEach((item, index, array) => {
                res = res + `<tr> <td>${index+1}</td> <td>${item.title}</td> <td>${item.price} </td> <td>${item.category}</td> <td><img height = "80px" width = "80px"  src = "${item.image}" > </td></tr>`
            })
            document.querySelector("tbody").innerHTML = res
        }
    </script>
</body>
</html>